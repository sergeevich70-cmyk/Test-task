1. Тест-кейс: Успешная оплата заказа с валидной картой (без 3-D Secure)
ID: TC_Business logic of the application_01
Название: Успешная оплата заказа с валидной картой (без 3-D Secure)
Предусловия:

- Пользователь авторизован в системе.

- В корзине пользователя добавлен хотя бы один товар для оплаты.

- Тестовый стенд платежного шлюза сконфигурирован на возврат успешного ответа для тестовой карты.

Шаги выполнения:

- Открыть страницу оформления заказа / оплаты.

- В поле «Номер карты» ввести значение 4242 4242 4242 4242.

- В поле «Срок действия» ввести значение 12/25.

- В поле «CVV/CVC» ввести значение 123.

- Нажать кнопку «Оплатить».

Ожидаемый результат:

- Система отправляет данные в платежный шлюз.

- Пользователь видит индикатор загрузки (лоадер).

- После обработки платежа на странице отображается сообщение: «Оплата прошла успешно».

- Статус заказа в личном кабинете пользователя изменяется на «Оплачен».

- На электронную почту пользователя, указанную в профиле, приходит письмо с чеком об оплате.

2. Тест-кейс: Оплата отклонена банком-эмитентом
ID: TC_Business logic of the application_02
Название: Оплата отклонена банком-эмитентом
Предусловия:

- Пользователь авторизован и находится на шаге оплаты заказа.

- Тестовый стенд платежного шлюза сконфигурирован на возврат ответа «Отклонено банком» для конкретной тестовой карты (например, 4000 0000 0000 0002).

Шаги выполнения:

- На странице оплаты ввести номер тестовой карты: 4000 0000 0000 0002.

- Заполнить поля «Срок действия» и «CVV» любыми валидными будущими значениями.

- Нажать кнопку «Оплатить».

Ожидаемый результат:

- Запрос уходит в платежный шлюз.

- Пользователь получает сообщение об ошибке: «Платеж отклонен банком. Пожалуйста, попробуйте использовать другую карту».

- Денежные средства с тестовой карты не списываются (проверяется по логам шлюза).

- Статус заказа в системе не изменяется и остается в значении «Ожидает оплаты».

- Письмо с чеком на email пользователя не отправляется.

3. Тест-кейс: Прерывание сессии во время оплаты
ID: TC_Business logic of the application_03
Название: Проверка консистентности данных при сбое соединения после нажатия кнопки «Оплатить»
Предусловия:

- Пользователь находится на странице оплаты заказа.

- Заказ сформирован.

Шаги выполнения:

-Заполнить данные карты валидными значениями.

- Нажать кнопку «Оплатить».

- Сразу после нажатия (пока крутится лоадер) закрыть вкладку браузера или выключить Wi-Fi.

- Подождать 2-3 минуты.

- Открыть приложение заново, авторизоваться и перейти в раздел «История заказов» / «Мои заказы».

Ожидаемый результат:

- Заказ не должен повиснуть в статусе «Оплачен», если шлюз не подтвердил транзакцию.

- Статус заказа должен быть «Не оплачен» или «Ошибка оплаты».

- Денежные средства не должны быть списаны (отсутствие двойных списаний).
